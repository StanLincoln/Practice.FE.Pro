# README

## Практическое занятие №35

Репозитарий содержит материалы по практическому занятию №35, посвященному работе с библиотеками `Redux`, `react-redux`.

### Цели занятия
- закрепление знаний, полученных на лекции;
- разбор практических примеров;
- практическое применение полученных знаний.

### Задачи занятия
1. Добавляем Redux-стейт в наше приложение. Библиотеки уже добавлены, так что можно с ними работать. Пока что в нашем редакс-стейте мы будем хранить только число участников похода к Одинокой Горе. То есть, это будет просто число.

Что нужно сделать:
 - создать в проекте папку `store`
 - в этой папке, создать папку `reducers` - здсь будут наши редьюсеры
 - также создать папку `actions` - здсь будут `actionCreators`
 - создаем первые экшны. Пока что нам нужен только один тип экшна - `incrementParticipants`, то есть увеличиваем кол-во участников на 1. Тип - `PARTICIPANTS/INCREMENT_PARTICIPANT`.
 - создаем первый редьюсер в папке `reducers`. Называем его `participantsReducer.js`. Это будет кусочек стейта, который отвечает за кол-во участников, инициализируем значение нулем. И обрабатываем в нем наш экшн из предыдущего пункта.
 - в папке `store` создать файл `store.js` - здесь мы инициализируем наш редакс-стейт, создаем `store`, и экспортируем его. При создании стора, ОБЯЗАТЕЛЬНО используем `combineReducers` - он нам понадобится дальше.
2. В компоненте `DwarfForm`, нужно при УСПЕШНОЙ регистрации участника похода, увеличивать кол-во участников. Для этого, нам поможет хук `useDispatch`.
3. Теперь извлечем эти данные из стейта. Нужно, чтобы компонент `HomePage` рендерил бы кол-во участников похода. Добавим туда параграф с текстом "Now there are __ participants - you still can join!". Чтобы извлечь эти данные из стейта, нам поможет хук `useSelector`.
4. Теперь поработаем с чем-то поинтереснее. Давайте хранить в редакс-стейте данные об участниках похода. Создадим еще кусок стейта, который будет отвечать за массив с данными участников. Определим экшны: `addParticipant`, `removeParticipant`. Эти экшны должны содержать полезную нагрузку: в первом случае - данные участника, а во втором - ID участника. Это будут экшны `PARTICIPANTS/ADD_PARTICIPANT`, `PARTICIPANTS/DROP_PARTICIPANT`.
5. Создаем редьюсер для участников. Начальное состояние - пустой массив. Нужно обрабатывать те экшны, которые мы определили в задаче 4, то есть добавлять и удалять данные участников из массива. ВАЖНО: массив мы НЕ мутируем!!! И добавляем этот редьюсер в стор, с ключом `participants`.
6. Воспользуемся этими данными. В компоненте `HomePage`, теперь вместо контекста нам нужно брать данные об участниках из стейта, и рендерить их.
7. Теперь попробуем поработать с постами. Нужно создать часть стейта, которая отвечает за работу с постами. Это должен быть объект, который содержит массив с постами, текущий статус (идет ли загрузка), и текст ошибки (если таковая произошла). И нужно в компоненте `PostsPage` работать с этими данными.

### Полезные ссылки по занятию:
 - [React Redux](https://ru.react-redux.js.org/introduction/getting-started) - официальная русскоязычная(!) документация. О качестве перевода лучше не задумываться - чем богаты. Рекомендуется в качестве справочника. Есть очень толковые примеры.
 - [Описание React-Redux](https://medium.com/swlh/react-redux-hooks-5e5dbb52d057) - англоязычное, но рекомендуется к прочтению. Немало полезной информации о хуках, о том, как это работает "под капотом". Также там упоминается "старый" редакс, без хуков (`connect`). Имеет смысл ознакомиться - на собесах попадается.
 - [О работе редакс под капотом](https://ivaneroshkin.medium.com/%D0%BA%D0%B0%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-redux-a967d8616398) - это для глубокого понимания, как работает редакс, и для демонстрации того, что он НЕ зависит от реакта, и может использоваться в plain JS code.